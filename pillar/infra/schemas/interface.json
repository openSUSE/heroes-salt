{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "infra/schemas/interface.json",
	"title": "Interface",
	"description": "Network interface of a virtual machine",
	"type": "object",
	"properties": {
		"source": {
			"description": "VLAN or physical interface on the hypervisor to attach",
			"type": "string",
			"pattern": "^(x-o?s|bond)-[\\w-]{1,9}$"
		},
		"mode": {
			"description": "https://libvirt.org/formatdomain.html#direct-attachment-to-physical-interface",
			"type": "string",
			"pattern": "^(bridge|passthrough)$"
		},
		"mac": {
			"description": "MAC (hardware) address",
			"type": "string",
			"pattern": "^([a-f0-9]{2}:){5}[a-f0-9]{2}$"
		},
		"ip4": {
			"description": "IPv4 address including CIDR mask",
			"type": "string",
			"format": "ipv4_net"
		},
		"ip6": {
			"description": "IPv6 adddress including CIDR mask",
			"type": "string",
			"format": "ipv6_net"
		},
		"pseudo_ip4": {
			"description": "IPv4 address to map to the IPv6 address using NAT64",
			"type": "string",
			"format": "ipv4"
		}
	},
	"additionalProperties": false,
	"required": [ "mac", "source" ]
}
